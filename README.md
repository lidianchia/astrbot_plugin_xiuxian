# AstrBot 修仙插件

一个功能丰富的修仙养成游戏插件，集成了 AI 智能叙事系统，为 AstrBot 用户带来沉浸式的修仙体验。

## ✨ 特色功能

### 🧘‍♂️ 修炼系统
- **10大境界**：从练气期到仙人境的完整修仙路径
- **智能修炼**：AI 生成个性化修炼感悟和故事
- **突破挑战**：惊心动魄的境界突破体验

### ⚔️ 战斗系统
- **PVP对战**：与其他修仙者切磋较量
- **妖兽降伏**：历练中遭遇各种妖魔鬼怪
- **智能战斗**：AI 生成生动的战斗过程描述

### 🎒 装备系统
- **6种品质**：从凡品到仙品的装备进阶
- **4大类型**：武器、防具、饰品、丹药
- **寻宝探险**：发现隐藏的天材地宝

### 🏛️ 宗门系统
- **4大宗门**：青云门、天魔宗、武当派、峨眉派
- **宗门福利**：加入宗门获得修炼加成
- **宗门任务**：完成任务获得丰厚奖励

### 📋 任务系统
- **每日任务**：日常修炼、战斗挑战
- **每周任务**：长期目标和特殊奖励
- **成就系统**：记录修仙路上的里程碑

### 🤖 AI 智能系统
- **个性化叙事**：根据用户特质生成独特故事
- **智能师傅**：AI 师傅回答修仙问题
- **运势占卜**：预测每日修炼运势
- **动态事件**：AI 生成随机修仙事件

## 🚀 快速开始

### 安装要求
- AstrBot 框架
- Python 3.8+

### 安装步骤
1. 将插件文件夹放入 AstrBot 的 `data/plugins/` 目录
2. 在 AstrBot WebUI 的插件管理页面启用插件
3. 根据需要在插件配置中调整参数
4. 发送 `/修仙帮助` 开始你的修仙之旅

### 开发者安装
如果要进行开发调试：
1. Clone AstrBot 项目：`git clone https://github.com/AstrBotDevs/AstrBot`
2. 在 `AstrBot/data/plugins/` 目录下 clone 此插件
3. 使用 VSCode 打开 AstrBot 项目进行开发
4. 修改插件代码后，在 WebUI 中点击"重载插件"即可

## 🎮 指令列表

### 基础指令
- `/修仙帮助` - 查看帮助信息
- `/我的信息` - 查看个人修仙资料
- `/开始修仙` - 踏入修仙之路

### 修炼指令  
- `/修炼` - 进行修炼提升境界
- `/突破` - 尝试突破到下一境界
- `/历练` - 外出历练获得经验

### 战斗指令
- `/挑战 [@用户]` - 挑战其他修仙者
- `/降妖除魔` - 与妖兽战斗

### 装备指令
- `/我的装备` - 查看当前装备
- `/寻宝` - 寻找天材地宝
- `/炼器` - 炼制装备

### 宗门指令
- `/宗门信息` - 查看宗门详情
- `/加入宗门 [宗门名]` - 加入指定宗门
- `/宗门任务` - 查看宗门任务

### AI 功能指令
- `/修仙故事` - AI 生成个性化修仙剧情
- `/问道 [问题]` - 向 AI 师傅请教
- `/占卜` - 预测今日修炼运势

## 🎯 境界系统

| 境界 | 等级 | 最大经验 | 基础战力 |
|------|------|----------|----------|
| 练气期 | 1 | 100 | 10 |
| 筑基期 | 2 | 300 | 30 |
| 金丹期 | 3 | 800 | 80 |
| 元婴期 | 4 | 2000 | 200 |
| 化神期 | 5 | 5000 | 500 |
| 炼虚期 | 6 | 12000 | 1200 |
| 合体期 | 7 | 30000 | 3000 |
| 大乘期 | 8 | 80000 | 8000 |
| 渡劫期 | 9 | 200000 | 20000 |
| 仙人境 | 10 | ∞ | 50000 |

## 🏛️ 宗门介绍

### 青云门 (正道)
- **特色**：剑道传承，正气凛然
- **福利**：修炼速度 +10%，经验 +5%

### 天魔宗 (魔道)  
- **特色**：天魔功法，攻击犀利
- **福利**：攻击力 +15%，战斗经验 +10%

### 武当派 (道门)
- **特色**：太极玄功，防御卓越  
- **福利**：防御力 +10%，突破率 +5%

### 峨眉派 (佛门)
- **特色**：慈悲为怀，回复强劲
- **福利**：治疗效果 +20%，运气 +10%

## ⚙️ 插件配置

本插件的所有配置都可以在 AstrBot 的插件管理界面中进行设置，无需手动编辑配置文件。

### 🤖 LLM 配置
- **LLM 服务商**：选择 AI 服务提供商（模拟模式/OpenAI/Claude/本地模型）
- **API 密钥**：对应服务商的 API 密钥
- **模型名称**：具体使用的模型（如 gpt-3.5-turbo）
- **API 基础地址**：自定义 API 地址（可选）
- **生成参数**：最大长度、创造性等参数

### ⚖️ 游戏平衡配置
- **基础修炼经验**：每次修炼获得的经验值 (1-100)
- **突破成功率**：境界突破的基础成功率 (0.1-0.9)
- **冷却时间**：各种行动的冷却时间（分钟）
- **背包容量**：玩家背包的最大物品数量

### 🎛️ 功能开关
- **启用 AI 故事生成**：是否使用 AI 生成个性化故事
- **启用每日运势**：是否提供运势占卜功能
- **启用宗门系统**：是否开放宗门相关功能
- **启用任务系统**：是否提供每日/每周任务
- **启用玩家对战**：是否允许玩家 PVP
- **调试模式**：是否显示详细调试信息

### 📝 配置步骤
1. 在 AstrBot 管理界面中找到"修仙插件"
2. 点击"配置"按钮
3. 根据需要修改各项设置
4. 保存配置后重启插件生效

### 🔑 推荐配置

#### 新手入门配置
- LLM 服务商：模拟模式
- 修炼冷却：15分钟
- 突破成功率：0.8
- 启用所有功能开关

#### 高级体验配置  
- LLM 服务商：OpenAI GPT
- 填入有效的 API 密钥
- 修炼冷却：30分钟
- 突破成功率：0.7
- 创造性参数：0.9

### ⚠️ 注意事项
- 使用真实 LLM 服务需要有效的 API 密钥
- 修改配置后建议重启插件
- 调试模式会产生更多日志，建议仅在排错时开启

## 📁 项目结构

```
astrbot_plugin_xiuxian/
├── main.py                    # 主插件文件
├── metadata.yaml              # 插件配置
├── models/                    # 数据模型
│   ├── user.py               # 用户数据模型
│   └── ...
├── systems/                   # 游戏系统
│   ├── cultivation_system.py # 修炼系统
│   ├── battle_system.py      # 战斗系统
│   └── ...
├── core/                      # 核心引擎
│   ├── llm_integration.py    # LLM 集成
│   └── game_engine.py        # 游戏引擎
├── utils/                     # 工具模块
│   ├── data_manager.py       # 数据管理
│   └── constants.py          # 游戏常量
└── assets/                    # 资源文件
    ├── config/               # 配置文件
    └── prompts/              # 提示词模板
```

## 🔮 AI 功能详解

### 智能叙事系统
- 根据用户境界、特质、历史生成个性化故事
- 每次修炼、战斗都有独特的描述
- 动态适应用户的游戏风格

### AI 师傅系统
- 回答修仙相关问题
- 提供个性化修炼建议
- 基于用户状态调整回答风格

### 随机事件生成
- AI 创造原创的机缘和劫难
- 根据用户运气和境界调整概率
- 生成意想不到的剧情转折

## 📈 数据统计

插件会自动记录以下统计数据：
- 用户修炼次数
- 战斗胜负记录
- 宗门活跃度
- 服务器整体数据

## 🛠️ 开发说明

### 自定义 LLM 客户端
可以在 `core/llm_integration.py` 中添加新的 LLM 客户端支持。

### 扩展游戏系统
可以在 `systems/` 目录下添加新的游戏系统模块。

### 修改游戏平衡
编辑 `assets/config/game_balance.yaml` 调整游戏参数。

## 🐛 问题反馈

如果遇到问题，请检查：
1. AstrBot 版本兼容性
2. 数据目录权限
3. 依赖包安装情况

## 📄 许可证

MIT License

## 🙏 致谢

感谢 AstrBot 框架提供的强大基础设施。

---

**开始你的修仙之旅吧！发送 `/开始修仙` 踏入这个充满奇遇的世界！** ✨
